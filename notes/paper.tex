%!TeX program = latexmk
\documentclass{easychair}
\usepackage{todonotes}
\usepackage{doc}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage{numprint}
\npthousandsep{,}

\newcommand{\gmodel}{\mathcal{M}_G}

\title{
    Iterative Function Definitions
}
\author{Stefan Ratschan \and Marek Dančo \and Mikoláš Janota}
\authorrunning{Dančo et al.}
\titlerunning{Iterative Function Definitions}
\institute{
}

\begin{document}

\maketitle

\section*{Motivation}
Consider the following UFLIA formula:
\[
    \underbrace{(f(3, a) \geq 4 + g(b))}_{\varphi_G}\,\land \,
    \underbrace{(\forall x, y. \,f(x, y) < x + g(y))}_{\varphi_1}\,\land \,
    \underbrace{(\forall x. \,g(x) = g(x + 2))}_{\varphi_2}
\]
Note that currently, \texttt{Z3} cannot prove this formula is satisfiable.
However, we show there is an algorithmic way of proving the satisfiability
of this formula and try to identify UFLIA fragments in which this algorithm is applicable.

Let $\gmodel$ be the following partial model of the ground part $\varphi_G$:
\begin{gather*}
    a = 1, \\
    b = 0, \\
    f = \{(3, 0) \mapsto 5\}, \\
    g = \{0 \mapsto 1\}.
\end{gather*}
The definitions of $f, g$ on the rest of the domain are not interesting at this point.
Notice that because $g(0) = 0$ and the structure of $\varphi_2$, we can now define $g$
using $\gmodel$ on all even integers.
Specifically, we can order the arguments of $g$ in $\varphi_2$, that is $x \prec x+2$, and define
$g(2), g(4), g(6), \dots$ by unifying $x$ with $0, 2, 4, \dots$ and then define $g(-2), g(-4), g(-6), \dots$
by unifying $x+2$ with $0, -2, -4, \dots$

\dots

Observe that it must be that $a \not= b$, otherwise
$f(3, a) \geq 4 + g(b) \,\land \,f(3, a) < 3 + g(a)$ is \textsc{unsat}.
Consequently, $\gmodel$ must be such that $a^{\gmodel} \not= b^{\gmodel}$.
We can check the compatibility of $\gmodel$ with the rest of the formula
after each step of our procedure and when a conflict is found,
we can learn the new ground literals from the \textsc{unsat} core and
restart the procedure with the updated ground part.

\end{document}
